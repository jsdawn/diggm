{"version":3,"sources":["util/copyright.js","util/global.js","serviceWorker.js","router/FrontendAuth.js","page/home/NotFound.js","store/actions.js","store/actionTypes.js","api/request.js","api/index.js","router/AuthData.js","page/home/Index.js","components/ActivityLoading.js","page/test/Details.js","page/test/components/TestItem.js","page/test/Tests.js","router/routerConfig.js","router/Router.js","store/reducers.js","store/index.js","components/DmNoticeBar.js","App.js","index.js"],"names":["window","dmcopyright","console","info","_getQueryBySearch","location","name","reg","RegExp","r","search","substr","match","unescape","Boolean","hostname","NOT_CHANNEL","FrontendAuth","this","props","config","channel","pathname","targetRouterConfig","find","v","path","redirect","to","component","includes","exact","state","Component","connect","NotFound","setChannel","type","value","axios","interceptors","request","use","localStorage","getItem","headers","JSON","parse","channel_token","url","params","method","urlFormat","Promise","resolve","reject","post","then","response","data","catch","error","get","getTestList","categoryId","testType","flag","page","size","category_id","test_type","BASE_URL","AuthData","fetchChannel","channelId","channel_id","res","channel_key","channel_token_expire","history","push","dispatch","Index","onClick","tests","length","ActivityLoading","className","justify","style","paddingTop","text","Details","testId","detail","test_id","setState","prevProps","prevState","fetchDetail","Header","title","thumb","pic","thumbStyle","width","maxWidth","marginRight","Body","dangerouslySetInnerHTML","__html","content","Footer","like_num","extra","tested_num","TestItem","row","handleItem","src","alt","id","brief","Tests","onEndReached","upLoading","hasMore","fetchList","list","concat","ds","DataSource","rowHasChanged","r1","r2","dataSource","ListFooter","padding","textAlign","cloneWithRows","renderRow","rowData","id1","i","pageSize","renderFooter","onEndReachedThreshold","useBodyScroll","img","message","routerConfig","Home","auth","BasicRoute","LS","initState","reducers","combineReducers","action","adds","Array","setItem","stringify","store","createStore","reducer","compose","applyMiddleware","thunk","devToolsExtension","f","MyComponent","copyPublicId","copyTo","success","offline","position","top","left","right","zIndex","marqueeProps","loop","mode","color","cursor","fontWeight","App","DmNoticeBar","Router","FastClick","attach","document","body","ReactDOM","render","glo","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.67b42259.chunk.js","sourcesContent":["// 版权信息\nwindow.dmcopyright = `欢迎使用 diggm!\n当前版本为：V0.1.1\n作者：jsdawn\nGithub：https://github.com/jsdawn/diggm\n测评来源于微信公众号 (DiggMind)\n关注公众号，挖掘自我，认知自我`;\n// eslint-disable-next-line\nconsole.info(`%c${window.dmcopyright}`, `color:blue`);\n","window._getQueryBySearch = (location, name) => {\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n  let r = location.search.substr(1).match(reg);\n  if (r != null) {\n    return unescape(r[2]);\n  }\n  return null;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction mapStateToProps(state) {\n  return {\n    channel: state.channel\n  };\n}\n\nconst NOT_CHANNEL = [\"/404\", \"/auth\"];\n\nclass FrontendAuth extends Component {\n  render() {\n    const { location, config, channel } = this.props;\n    const { pathname } = location;\n\n    const targetRouterConfig = config.find(v => v.path === pathname);\n\n    // redirect router  - redirect\n    if (targetRouterConfig && targetRouterConfig.redirect) {\n      return <Redirect to={targetRouterConfig.redirect} />;\n    }\n\n    // Redirect /404\n    if (!targetRouterConfig || !targetRouterConfig.component) {\n      return <Redirect to=\"/404\" />;\n    }\n\n    const { component } = targetRouterConfig;\n\n    // Redirect /auth\n    if (!channel && !NOT_CHANNEL.includes(pathname)) {\n      return (\n        <Redirect to={{ pathname: \"/auth\", state: { redirect: pathname } }} />\n      );\n    }\n\n    // Route to component\n    return <Route exact path={pathname} component={component} />;\n  }\n}\n\nexport default connect(mapStateToProps)(FrontendAuth);\n","import React, { Component } from \"react\";\n\nclass NotFound extends Component {\n  render() {\n    return <div>404 File not found</div>;\n  }\n}\n\nexport default NotFound;\n","import * as ActionTypes from \"./actionTypes\";\n\nexport const addTests = item => {\n  return {\n    type: ActionTypes.ADD_TESTS,\n    value: item\n  };\n};\n\nexport const toggleTests = tests => {\n  return {\n    type: ActionTypes.TOGGLE_TESTS,\n    value: tests\n  };\n};\n\nexport const setChannel = channel => {\n  return {\n    type: ActionTypes.SET_CHANNEL,\n    value: channel\n  };\n};\n","export const ADD_TESTS = \"ADD_TESTS\";\nexport const TOGGLE_TESTS = \"TOGGLE_TESTS\";\n\nexport const SET_CHANNEL = \"SET_CHANNEL\";\n","import axios from \"axios\";\n\naxios.interceptors.request.use(function(config) {\n  let channel = localStorage.getItem(\"channel\");\n\n  config.headers[\"Authorization\"] = channel\n    ? JSON.parse(channel).channel_token\n    : \"\";\n\n  return config;\n});\n\nconst basicUrl = \"\";\n\nconst request = function(url, params, method) {\n  method = method || \"GET\";\n  let urlFormat = basicUrl + url;\n\n  if (method === \"POST\") {\n    return new Promise(function(resolve, reject) {\n      axios\n        .post(urlFormat, params)\n        .then(function(response) {\n          resolve(response.data);\n        })\n        .catch(function(error) {\n          reject(error);\n        });\n    });\n  } else {\n    return new Promise(function(resolve, reject) {\n      axios\n        .get(urlFormat, { params: params })\n        .then(function(response) {\n          resolve(response.data);\n        })\n        .catch(function(error) {\n          reject(error);\n        });\n    });\n  }\n};\n\nexport default request;\n","import request from \"./request\";\nimport { BASE_URL } from \"./config\";\n\nexport const getGlobalData = function(channelId) {\n  let url = BASE_URL + \"/v1/wx/channelData\";\n  return request(url, {\n    channel_id: channelId ? channelId : 1\n  });\n};\n\nexport const getTestList = function(categoryId, testType, flag, page, size) {\n  let params = {};\n  params.page = page || 1;\n  params.size = size || 20;\n  params.category_id = categoryId || 0;\n\n  if (testType) params.test_type = testType;\n\n  if (flag) params.flag = flag;\n\n  let url = BASE_URL + \"/v2/test/list\";\n  return request(url, params);\n};\n\nexport const getTestDetail = function(testId) {\n  let url = BASE_URL + \"/v2/test/detail\";\n  return request(url, { test_id: testId });\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { setChannel } from \"@/store/actions\";\nimport { getGlobalData } from \"@/api\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setChannel: channel => dispatch(setChannel(channel))\n  };\n}\n\nclass AuthData extends Component {\n  render() {\n    return <div>auth...</div>;\n  }\n\n  componentDidMount() {\n    this.fetchChannel();\n  }\n\n  fetchChannel() {\n    getGlobalData().then(res => {\n      let channel = res.data ? res.data.channel : null;\n      channel.channel_key = res.data.channel_key;\n      channel.channel_token = res.data.channel_token;\n      channel.channel_token_expire = res.data.channel_token_expire;\n\n      this.props.setChannel(channel);\n\n      let redirect = this.props.location.state\n        ? this.props.location.state.redirect\n        : \"/\";\n      this.props.history.push({ pathname: redirect });\n    });\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthData);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nfunction mapStateToProps(state) {\n  return {\n    tests: state.tests\n  };\n}\n\nclass Index extends Component {\n  render() {\n    return (\n      <div>\n        <p>我是首页</p>\n\n        <button\n          onClick={() => {\n            this.props.history.push(\"tests\");\n          }}\n        >\n          前往列表 ({this.props.tests.length})\n        </button>\n      </div>\n    );\n  }\n\n  componentDidMount() {}\n}\n\nexport default connect(mapStateToProps)(Index);\n","import React from \"react\";\nimport { ActivityIndicator, Flex } from \"antd-mobile\";\n\nfunction ActivityLoading(props) {\n  return (\n    <Flex\n      className=\"comp-activity-loading\"\n      justify=\"center\"\n      style={{ paddingTop: \"20px\" }}\n    >\n      <ActivityIndicator text=\"Loading...\" />\n    </Flex>\n  );\n}\n\nexport default ActivityLoading;\n","import React, { Component } from \"react\";\n\nimport \"./Details.scss\";\n\nimport { Card, WingBlank, WhiteSpace } from \"antd-mobile\";\nimport ActivityLoading from \"@/components/ActivityLoading\";\n\nimport { getTestDetail } from \"@/api/index.js\";\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      testId: 0,\n      detail: null\n    };\n  }\n\n  fetchDetail() {\n    if (this.state.testId <= 0) return;\n\n    getTestDetail(this.state.testId).then(res => {\n      this.setState({ detail: res.data });\n    });\n  }\n\n  componentDidMount() {\n    let testId = window._getQueryBySearch(this.props.location, \"id\");\n    this.setState({ testId: testId });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.testId !== this.state.testId) {\n      this.fetchDetail(this.state.testId);\n    }\n  }\n\n  render() {\n    let { detail } = this.state;\n\n    if (!detail) {\n      return <ActivityLoading />;\n    }\n\n    return (\n      <div className=\"page-test-detail\">\n        <WingBlank size=\"lg\">\n          <WhiteSpace size=\"lg\" />\n          <Card>\n            <Card.Header\n              title={detail.title}\n              thumb={detail.pic}\n              thumbStyle={{\n                width: \"25%\",\n                maxWidth: \"100px\",\n                marginRight: \"10px\"\n              }}\n            />\n            <Card.Body>\n              <div\n                className=\"detail-content\"\n                dangerouslySetInnerHTML={{ __html: detail.content }}\n              />\n            </Card.Body>\n            <Card.Footer\n              content={detail.like_num + \"收藏\"}\n              extra={detail.tested_num + \"测过\"}\n            />\n          </Card>\n          <WhiteSpace size=\"lg\" />\n        </WingBlank>\n      </div>\n    );\n  }\n}\n\nexport default Details;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./TestItem.scss\";\n\nTestItem.propTypes = {\n  row: PropTypes.object,\n  handleItem: PropTypes.func\n};\n\nfunction TestItem(props) {\n  let { row, handleItem } = props;\n\n  return (\n    <div className=\"am-list-item am-list-item-top\">\n      <div className=\"am-list-thumb\">\n        <img src={row.pic} alt=\"\" />\n      </div>\n\n      <div\n        className=\"am-list-line am-list-line-multiple\"\n        onClick={() => {\n          handleItem(row.id);\n        }}\n      >\n        <div className=\"am-list-content\">\n          {row.title}\n          <div className=\"am-list-brief\">\n            {row.brief ? row.brief : \"客官进来看看 吖\"}\n          </div>\n        </div>\n        <div className=\"am-list-extra\">{row.like_num}收藏</div>\n      </div>\n    </div>\n  );\n}\n\nexport default TestItem;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport \"./Tests.scss\";\n\nimport { ListView, Icon, Result } from \"antd-mobile\";\nimport TestItem from \"@/page/test/components/TestItem\";\nimport ActivityLoading from \"@/components/ActivityLoading\";\n\nimport { getTestList } from \"@/api/index.js\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {};\n}\n\nconst myImg = src => <img src={src} style={{ width: \"60px\" }} alt=\"\" />;\n\nclass Tests extends Component {\n  constructor(props) {\n    super(props);\n    const ds = new ListView.DataSource({\n      rowHasChanged: (r1, r2) => r1 !== r2\n    });\n    this.state = {\n      dataSource: ds,\n      list: [],\n      upLoading: false,\n      hasMore: true,\n\n      categoryId: 0,\n      testType: null,\n      flag: null,\n      page: 0,\n      size: 10\n    };\n  }\n\n  //上拉加载\n  onEndReached = () => {\n    if (this.state.upLoading || !this.state.hasMore) {\n      return;\n    }\n    this.fetchList();\n  };\n\n  fetchList = () => {\n    this.setState({\n      upLoading: true,\n      page: this.state.page + 1\n    });\n\n    let { categoryId, testType, flag, page, size } = this.state;\n    getTestList(categoryId, testType, flag, page, size).then(res => {\n      let list = res.data;\n\n      this.setState({\n        upLoading: false,\n        list: this.state.list.concat(list),\n        hasMore: list.length >= size\n      });\n    });\n  };\n\n  handleItem = testId => {\n    this.props.history.push(`/details?id=${testId}`);\n  };\n\n  componentDidMount() {\n    this.fetchList();\n  }\n\n  render() {\n    const { list, dataSource, hasMore, size } = this.state;\n\n    const ListFooter = () => {\n      return (\n        <div style={{ padding: 10, textAlign: \"center\" }}>\n          {hasMore ? <Icon type=\"loading\" /> : \"- 完 -\"}\n        </div>\n      );\n    };\n\n    if (list.length === 0 && hasMore) {\n      return <ActivityLoading />;\n    }\n\n    if (list.length === 0 && !hasMore) {\n      return (\n        <Result\n          img={myImg(\n            \"https://gw.alipayobjects.com/zos/rmsportal/GIyMDJnuqmcqPLpHCSkj.svg\"\n          )}\n          title=\"暂无数据\"\n          message=\"关注微信公众号【DiggMind】，挖掘自我，认知自我\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"page-tests\">\n        <ListView\n          dataSource={dataSource.cloneWithRows(list)}\n          renderRow={(rowData, id1, i) => {\n            return <TestItem row={rowData} handleItem={this.handleItem} />;\n          }}\n          pageSize={size}\n          renderFooter={() => <ListFooter />}\n          onEndReached={() => this.onEndReached()}\n          onEndReachedThreshold={20}\n          useBodyScroll={true}\n        />\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tests);\n","/*\n * Route config 高阶组件 路由守卫\n * - 不可嵌套\n * - 不可添加参数 /:id\n * */\n\nimport NotFound from \"@/page/home/NotFound.js\";\nimport AuthData from \"@/router/AuthData.js\";\n\nimport Home from \"@/page/home/Index.js\";\nimport Details from \"@/page/test/Details.js\";\nimport Tests from \"@/page/test/Tests.js\";\n\nexport const routerConfig = [\n  {\n    path: \"/404\",\n    component: NotFound\n  },\n  {\n    path: \"/auth\",\n    component: AuthData\n  },\n  {\n    path: \"/\",\n    redirect: \"/tests\"\n  },\n  {\n    path: \"/home\",\n    component: Home,\n    auth: true\n  },\n  {\n    path: \"/tests\",\n    component: Tests\n  },\n  {\n    path: \"/details\",\n    component: Details\n  }\n];\n","/*\n * Router.js - 路由入口\n * routerConfig.js - 路由配置\n * FrontendAuth.js - 路由高阶组件（路由守卫）\n * AuthData.js - 守卫数据逻辑（可选）\n * */\n\nimport React from \"react\";\nimport { HashRouter, Switch } from \"react-router-dom\";\n\nimport FrontendAuth from \"@/router/FrontendAuth.js\";\n\nimport { routerConfig } from \"@/router/routerConfig.js\";\n\nconst BasicRoute = () => (\n  <HashRouter>\n    <Switch>\n      <FrontendAuth config={routerConfig} />\n    </Switch>\n  </HashRouter>\n);\n\nexport default BasicRoute;\n","import { combineReducers } from \"redux\";\nimport * as ActionTypes from \"./actionTypes\";\n\nconst LS = window.localStorage;\n\n// init data\nconst initState = {\n  tests: [\"测试1\", \"测试2\"],\n  channel: LS.getItem(\"channel\") || null\n};\n\nconst tests = (tests = initState.tests, action) => {\n  switch (action.type) {\n    case ActionTypes.ADD_TESTS:\n      let adds = new Array(action.value);\n      return tests.concat(adds);\n\n    case ActionTypes.TOGGLE_TESTS:\n      return action.value;\n\n    default:\n      return tests;\n  }\n};\n\nconst channel = (channel = initState.channel, action) => {\n  switch (action.type) {\n    case ActionTypes.SET_CHANNEL:\n      LS.setItem(\"channel\", JSON.stringify(action.value));\n      return action.value;\n\n    default:\n      return channel;\n  }\n};\n\nconst reducers = combineReducers({\n  tests,\n  channel\n});\n\nexport default reducers;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducer from \"./reducers\";\n\n//创建store\nconst store = createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n    window.devToolsExtension ? window.devToolsExtension() : f => f //开启redux调试\n  )\n);\n\nexport default store;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { NoticeBar, Toast } from \"antd-mobile\";\nimport copyTo from \"copy-to-clipboard\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nclass MyComponent extends Component {\n  copyPublicId = () => {\n    let copyResult = copyTo(\"DiggMind\", 111);\n\n    if (copyResult) {\n      const customContent = () => (\n        <div>\n          <p>已为您复制 </p>\n          <p>【DiggMind】公众号ID</p>\n          <p>请前往微信「粘贴」搜索</p>\n        </div>\n      );\n      Toast.success(customContent(), 3);\n    } else {\n      const customContent = () => (\n        <div>\n          <p>请前往微信 搜索：</p>\n          <p>公众号：DiggMind</p>\n        </div>\n      );\n      Toast.offline(customContent(), 3);\n    }\n  };\n\n  render() {\n    return (\n      <NoticeBar\n        style={{\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          right: 0,\n          zIndex: 100\n        }}\n        marqueeProps={{ loop: true, style: { padding: \"0 15px 0 8px\" } }}\n        mode=\"link\"\n        action={\n          <span\n            style={{ color: \"#108ee9\", cursor: \"pointer\", fontWeight: 600 }}\n            onClick={this.copyPublicId}\n          >\n            去看看\n          </span>\n        }\n      >\n        该测评来源：微信公众号 【DiggMind】，关注公众号 挖掘自我，认识自我。\n      </NoticeBar>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(MyComponent);\n","// app.js 页面入口页面\n\nimport React, { Component } from \"react\";\nimport { Provider } from \"react-redux\";\n\nimport Router from \"@/router/Router.js\";\nimport store from \"@/store/index.js\";\n\nimport DmNoticeBar from \"@/components/DmNoticeBar\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <div className=\"app minipage has-notice-bar\">\n          <DmNoticeBar />\n          <Router />\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// main 入口文件\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as serviceWorker from \"@/serviceWorker\";\nimport FastClick from \"fastclick\";\n\nimport \"@/style/index.scss\";\n\nimport \"@/util/copyright.js\";\nimport \"@/util/global.js\";\n\nimport App from \"@/App\";\n\nFastClick.attach(document.body);\n\nReactDOM.render(<App glo=\"gggg\" />, document.getElementById(\"root\"));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}