{"version":3,"sources":["util/global.js","serviceWorker.js","router/FrontendAuth.js","page/home/NotFound.js","store/actions.js","store/actionTypes.js","api/request.js","api/index.js","router/AuthData.js","page/home/Index.js","components/DmNoticeBar.js","page/test/Details.js","page/test/components/TestItem.js","page/test/Tests.js","router/routerConfig.js","router/Router.js","store/reducers.js","store/index.js","App.js","index.js"],"names":["window","_getQueryBySearch","location","name","reg","RegExp","r","search","substr","match","unescape","Boolean","hostname","NOT_CHANNEL","FrontendAuth","this","props","config","channel","pathname","targetRouterConfig","find","v","path","redirect","to","component","includes","exact","state","Component","connect","NotFound","setChannel","type","value","axios","interceptors","request","use","localStorage","getItem","headers","JSON","parse","channel_token","url","params","method","urlFormat","Promise","resolve","reject","post","then","response","data","catch","error","get","getTestList","categoryId","testType","flag","page","size","category_id","test_type","BASE_URL","AuthData","fetchChannel","channelId","channel_id","res","channel_key","channel_token_expire","history","push","dispatch","Index","onClick","tests","length","MyComponent","copyPublicId","copyTo","success","offline","style","position","top","left","width","zIndex","marqueeProps","loop","padding","mode","action","color","cursor","fontWeight","Details","testId","detail","test_id","setState","prevProps","prevState","fetchDetail","className","DmNoticeBar","Header","title","thumb","pic","thumbStyle","marginRight","Body","dangerouslySetInnerHTML","__html","content","Footer","like_num","extra","tested_num","TestItem","row","handleItem","src","alt","id","brief","Tests","onEndReached","upLoading","hasMore","fetchList","list","concat","ds","DataSource","rowHasChanged","r1","r2","dataSource","ListFooter","textAlign","cloneWithRows","renderRow","rowData","id1","i","pageSize","renderFooter","onEndReachedThreshold","useBodyScroll","rows","routerConfig","Home","auth","BasicRoute","LS","initState","reducers","combineReducers","adds","Array","setItem","stringify","store","createStore","reducer","compose","applyMiddleware","thunk","devToolsExtension","f","App","Router","FastClick","attach","document","body","ReactDOM","render","glo","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4de5ef0c.chunk.js","sourcesContent":["window._getQueryBySearch = (location, name) => {\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n  let r = location.search.substr(1).match(reg);\n  if (r != null) {\n    return unescape(r[2]);\n  }\n  return null;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction mapStateToProps(state) {\n  return {\n    channel: state.channel\n  };\n}\n\nconst NOT_CHANNEL = [\"/404\", \"/auth\"];\n\nclass FrontendAuth extends Component {\n  render() {\n    const { location, config, channel } = this.props;\n    const { pathname } = location;\n\n    const targetRouterConfig = config.find(v => v.path === pathname);\n\n    // redirect router  - redirect\n    if (targetRouterConfig && targetRouterConfig.redirect) {\n      return <Redirect to={targetRouterConfig.redirect} />;\n    }\n\n    // Redirect /404\n    if (!targetRouterConfig || !targetRouterConfig.component) {\n      return <Redirect to=\"/404\" />;\n    }\n\n    const { component } = targetRouterConfig;\n\n    // Redirect /auth\n    if (!channel && !NOT_CHANNEL.includes(pathname)) {\n      return (\n        <Redirect to={{ pathname: \"/auth\", state: { redirect: pathname } }} />\n      );\n    }\n\n    // Route to component\n    return <Route exact path={pathname} component={component} />;\n  }\n}\n\nexport default connect(mapStateToProps)(FrontendAuth);\n","import React, { Component } from \"react\";\n\nclass NotFound extends Component {\n  render() {\n    return <div>404 File not found</div>;\n  }\n}\n\nexport default NotFound;\n","import * as ActionTypes from \"./actionTypes\";\n\nexport const addTests = item => {\n  return {\n    type: ActionTypes.ADD_TESTS,\n    value: item\n  };\n};\n\nexport const toggleTests = tests => {\n  return {\n    type: ActionTypes.TOGGLE_TESTS,\n    value: tests\n  };\n};\n\nexport const setChannel = channel => {\n  return {\n    type: ActionTypes.SET_CHANNEL,\n    value: channel\n  };\n};\n","export const ADD_TESTS = \"ADD_TESTS\";\nexport const TOGGLE_TESTS = \"TOGGLE_TESTS\";\n\nexport const SET_CHANNEL = \"SET_CHANNEL\";\n","import axios from \"axios\";\n\naxios.interceptors.request.use(function(config) {\n  let channel = localStorage.getItem(\"channel\");\n\n  config.headers[\"Authorization\"] = channel\n    ? JSON.parse(channel).channel_token\n    : \"\";\n\n  return config;\n});\n\nconst basicUrl = \"\";\n\nconst request = function(url, params, method) {\n  method = method || \"GET\";\n  let urlFormat = basicUrl + url;\n\n  if (method === \"POST\") {\n    return new Promise(function(resolve, reject) {\n      axios\n        .post(urlFormat, params)\n        .then(function(response) {\n          resolve(response.data);\n        })\n        .catch(function(error) {\n          reject(error);\n        });\n    });\n  } else {\n    return new Promise(function(resolve, reject) {\n      axios\n        .get(urlFormat, { params: params })\n        .then(function(response) {\n          resolve(response.data);\n        })\n        .catch(function(error) {\n          reject(error);\n        });\n    });\n  }\n};\n\nexport default request;\n","import request from \"./request\";\nimport { BASE_URL } from \"./config\";\n\nexport const getGlobalData = function(channelId) {\n  let url = BASE_URL + \"/v1/wx/channelData\";\n  return request(url, {\n    channel_id: channelId ? channelId : 1\n  });\n};\n\nexport const getTestList = function(categoryId, testType, flag, page, size) {\n  let params = {};\n  params.page = page || 1;\n  params.size = size || 20;\n  params.category_id = categoryId || 0;\n\n  if (testType) params.test_type = testType;\n\n  if (flag) params.flag = flag;\n\n  let url = BASE_URL + \"/v2/test/list\";\n  return request(url, params);\n};\n\nexport const getTestDetail = function(testId) {\n  let url = BASE_URL + \"/v2/test/detail\";\n  return request(url, { test_id: testId });\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { setChannel } from \"@/store/actions\";\nimport { getGlobalData } from \"@/api\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setChannel: channel => dispatch(setChannel(channel))\n  };\n}\n\nclass AuthData extends Component {\n  render() {\n    return <div>auth...</div>;\n  }\n\n  componentDidMount() {\n    this.fetchChannel();\n  }\n\n  fetchChannel() {\n    getGlobalData().then(res => {\n      let channel = res.data ? res.data.channel : null;\n      channel.channel_key = res.data.channel_key;\n      channel.channel_token = res.data.channel_token;\n      channel.channel_token_expire = res.data.channel_token_expire;\n\n      this.props.setChannel(channel);\n\n      let redirect = this.props.location.state\n        ? this.props.location.state.redirect\n        : \"/\";\n      this.props.history.push({ pathname: redirect });\n    });\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthData);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nfunction mapStateToProps(state) {\n  return {\n    tests: state.tests\n  };\n}\n\nclass Index extends Component {\n  render() {\n    return (\n      <div>\n        <p>我是首页</p>\n\n        <button\n          onClick={() => {\n            this.props.history.push(\"tests\");\n          }}\n        >\n          前往列表 ({this.props.tests.length})\n        </button>\n      </div>\n    );\n  }\n\n  componentDidMount() {}\n}\n\nexport default connect(mapStateToProps)(Index);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { NoticeBar, Toast } from \"antd-mobile\";\nimport copyTo from \"copy-to-clipboard\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nclass MyComponent extends Component {\n  copyPublicId = () => {\n    let copyResult = copyTo(\"DiggMind\", 111);\n\n    if (copyResult) {\n      const customContent = () => (\n        <div>\n          <p>已为您复制 </p>\n          <p>【DiggMind】公众号ID</p>\n          <p>请前往微信「粘贴」搜索</p>\n        </div>\n      );\n      Toast.success(customContent(), 13);\n    } else {\n      const customContent = () => (\n        <div>\n          <p>请前往微信 搜索：</p>\n          <p>公众号：DiggMind</p>\n        </div>\n      );\n      Toast.offline(customContent(), 3);\n    }\n  };\n\n  render() {\n    return (\n      <NoticeBar\n        style={{\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          zIndex: 100\n        }}\n        marqueeProps={{ loop: true, style: { padding: \"0 15px 0 8px\" } }}\n        mode=\"link\"\n        action={\n          <span\n            style={{ color: \"#108ee9\", cursor: \"pointer\", fontWeight: 600 }}\n            onClick={this.copyPublicId}\n          >\n            去看看\n          </span>\n        }\n      >\n        该测评来源：微信公众号 【DiggMind】，关注公众号 挖掘自我，认识自我。\n      </NoticeBar>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(MyComponent);\n","import React, { Component } from \"react\";\n\nimport \"./Details.scss\";\n\nimport { Card, WingBlank, WhiteSpace } from \"antd-mobile\";\nimport DmNoticeBar from \"@/components/DmNoticeBar\";\n\nimport { getTestDetail } from \"@/api/index.js\";\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      testId: 0,\n      detail: null\n    };\n  }\n\n  fetchDetail() {\n    if (this.state.testId <= 0) return;\n\n    getTestDetail(this.state.testId).then(res => {\n      this.setState({ detail: res.data });\n    });\n  }\n\n  componentDidMount() {\n    let testId = window._getQueryBySearch(this.props.location, \"id\");\n    this.setState({ testId: testId });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.testId !== this.state.testId) {\n      this.fetchDetail(this.state.testId);\n    }\n  }\n\n  render() {\n    let { detail } = this.state;\n\n    if (!detail) {\n      return <div>加载...</div>;\n    }\n\n    return (\n      <div className=\"test-detail has-notice-bar\">\n        <DmNoticeBar />\n\n        <WingBlank size=\"lg\">\n          <WhiteSpace size=\"lg\" />\n          <Card>\n            <Card.Header\n              title={detail.title}\n              thumb={detail.pic}\n              thumbStyle={{ width: \"25%\", marginRight: \"10px\" }}\n            />\n            <Card.Body>\n              <div\n                className=\"detail-content\"\n                dangerouslySetInnerHTML={{ __html: detail.content }}\n              />\n            </Card.Body>\n            <Card.Footer\n              content={detail.like_num + \"收藏\"}\n              extra={detail.tested_num + \"测过\"}\n            />\n          </Card>\n          <WhiteSpace size=\"lg\" />\n        </WingBlank>\n      </div>\n    );\n  }\n}\n\nexport default Details;\n","import React from \"react\";\n\nimport \"./TestItem.scss\";\n\nconst TestItem = props => {\n  let { row, handleItem } = props;\n\n  return (\n    <div className=\"am-list-item am-list-item-top\">\n      <div className=\"am-list-thumb\">\n        <img src={row.pic} alt=\"\" />\n      </div>\n\n      <div\n        className=\"am-list-line am-list-line-multiple\"\n        onClick={() => {\n          handleItem(row.id);\n        }}\n      >\n        <div className=\"am-list-content\">\n          {row.title}\n          <div className=\"am-list-brief\">\n            {row.brief ? row.brief : \"客官进来看看 吖\"}\n          </div>\n        </div>\n        <div className=\"am-list-extra\">{row.like_num}收藏</div>\n      </div>\n    </div>\n  );\n};\n\nexport default TestItem;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport \"./Tests.scss\";\n\nimport { ListView, Icon } from \"antd-mobile\";\nimport DmNoticeBar from \"@/components/DmNoticeBar\";\nimport TestItem from \"@/page/test/components/TestItem\";\n\nimport { getTestList } from \"@/api/index.js\";\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {};\n}\n\nclass Tests extends Component {\n  constructor(props) {\n    super(props);\n    const ds = new ListView.DataSource({\n      rowHasChanged: (r1, r2) => r1 !== r2\n    });\n    this.state = {\n      dataSource: ds,\n      list: [],\n      upLoading: false,\n      hasMore: true,\n\n      categoryId: 0,\n      testType: null,\n      flag: null,\n      page: 0,\n      size: 10\n    };\n  }\n\n  //上拉加载\n  onEndReached = () => {\n    if (this.state.upLoading || !this.state.hasMore) {\n      return;\n    }\n    this.fetchList();\n  };\n\n  fetchList = () => {\n    this.setState({\n      upLoading: true,\n      page: this.state.page + 1\n    });\n\n    let { categoryId, testType, flag, page, size } = this.state;\n    getTestList(categoryId, testType, flag, page, size).then(res => {\n      let list = res.data;\n\n      this.setState({\n        upLoading: false,\n        list: this.state.list.concat(list),\n        hasMore: list.length >= size\n      });\n    });\n  };\n\n  handleItem = testId => {\n    this.props.history.push(`/details?id=${testId}`);\n  };\n\n  componentDidMount() {\n    this.fetchList();\n  }\n\n  render() {\n    const { list, dataSource, hasMore, size } = this.state;\n\n    const ListFooter = () => {\n      return (\n        <div style={{ padding: 10, textAlign: \"center\" }}>\n          {hasMore ? <Icon type=\"loading\" /> : \"- 完 -\"}\n        </div>\n      );\n    };\n\n    return (\n      <div className=\"tests-page has-notice-bar\">\n        <DmNoticeBar />\n\n        {list && list.length ? (\n          <ListView\n            dataSource={dataSource.cloneWithRows(list)}\n            renderRow={(rowData, id1, i) => {\n              return <TestItem row={rowData} handleItem={this.handleItem} />;\n            }}\n            pageSize={size}\n            renderFooter={() => <ListFooter />}\n            onEndReached={() => this.onEndReached()}\n            onEndReachedThreshold={20}\n            useBodyScroll={true}\n          />\n        ) : list && list.rows && !list.rows.length ? (\n          <div>\n            <p>暂无数据</p>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tests);\n","/*\n * Route config 高阶组件 路由守卫\n * - 不可嵌套\n * - 不可添加参数 /:id\n * */\n\nimport NotFound from \"@/page/home/NotFound.js\";\nimport AuthData from \"@/router/AuthData.js\";\n\nimport Home from \"@/page/home/Index.js\";\nimport Details from \"@/page/test/Details.js\";\nimport Tests from \"@/page/test/Tests.js\";\n\nexport const routerConfig = [\n  {\n    path: \"/404\",\n    component: NotFound\n  },\n  {\n    path: \"/auth\",\n    component: AuthData\n  },\n  {\n    path: \"/\",\n    redirect: \"/tests\"\n  },\n  {\n    path: \"/home\",\n    component: Home,\n    auth: true\n  },\n  {\n    path: \"/tests\",\n    component: Tests\n  },\n  {\n    path: \"/details\",\n    component: Details\n  }\n];\n","/*\n * Router.js - 路由入口\n * routerConfig.js - 路由配置\n * FrontendAuth.js - 路由高阶组件（路由守卫）\n * AuthData.js - 守卫数据逻辑（可选）\n * */\n\nimport React from \"react\";\nimport { HashRouter, Switch } from \"react-router-dom\";\n\nimport FrontendAuth from \"@/router/FrontendAuth.js\";\n\nimport { routerConfig } from \"@/router/routerConfig.js\";\n\nconst BasicRoute = () => (\n  <HashRouter>\n    <Switch>\n      <FrontendAuth config={routerConfig} />\n    </Switch>\n  </HashRouter>\n);\n\nexport default BasicRoute;\n","import { combineReducers } from \"redux\";\nimport * as ActionTypes from \"./actionTypes\";\n\nconst LS = window.localStorage;\n\n// init data\nconst initState = {\n  tests: [\"测试1\", \"测试2\"],\n  channel: LS.getItem(\"channel\") || null\n};\n\nconst tests = (tests = initState.tests, action) => {\n  switch (action.type) {\n    case ActionTypes.ADD_TESTS:\n      let adds = new Array(action.value);\n      return tests.concat(adds);\n\n    case ActionTypes.TOGGLE_TESTS:\n      return action.value;\n\n    default:\n      return tests;\n  }\n};\n\nconst channel = (channel = initState.channel, action) => {\n  switch (action.type) {\n    case ActionTypes.SET_CHANNEL:\n      LS.setItem(\"channel\", JSON.stringify(action.value));\n      return action.value;\n\n    default:\n      return channel;\n  }\n};\n\nconst reducers = combineReducers({\n  tests,\n  channel\n});\n\nexport default reducers;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducer from \"./reducers\";\n\n//创建store\nconst store = createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n    window.devToolsExtension ? window.devToolsExtension() : f => f //开启redux调试\n  )\n);\n\nexport default store;\n","// app.js 页面入口页面\n\nimport React, { Component } from \"react\";\nimport { Provider } from \"react-redux\";\n\nimport Router from \"@/router/Router.js\";\nimport store from \"@/store/index.js\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <Router />\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// main 入口文件\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as serviceWorker from \"@/serviceWorker\";\nimport FastClick from \"fastclick\";\n\nimport \"@/style/index.scss\";\nimport \"@/util/global.js\";\n\nimport App from \"@/App\";\n\nFastClick.attach(document.body);\n\nReactDOM.render(<App glo=\"gggg\" />, document.getElementById(\"root\"));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}