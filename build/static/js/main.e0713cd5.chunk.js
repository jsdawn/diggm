(this.webpackJsonpdmwebapp=this.webpackJsonpdmwebapp||[]).push([[0],{111:function(e,t,n){e.exports=n(221)},116:function(e,t,n){},117:function(e,t){window.dmcopyright="\u6b22\u8fce\u4f7f\u7528 diggm!\n\u5f53\u524d\u7248\u672c\u4e3a\uff1aV0.1.1\n\u4f5c\u8005\uff1ajsdawn\nGithub\uff1ahttps://github.com/jsdawn/diggm\n\u6d4b\u8bc4\u6765\u6e90\u4e8e\u5fae\u4fe1\u516c\u4f17\u53f7 (DiggMind)\n\u5173\u6ce8\u516c\u4f17\u53f7\uff0c\u6316\u6398\u81ea\u6211\uff0c\u8ba4\u77e5\u81ea\u6211",console.info("%c".concat(window.dmcopyright),"color:blue")},118:function(e,t){window._getQueryBySearch=function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=e.search.substr(1).match(n);return null!=a?unescape(a[2]):null}},192:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(15),r=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(99),l=n.n(o),s=(n(116),n(117),n(118),n(10)),u=n(11),h=n(13),d=n(12),m=n(14),p=n(18),f=n(67),g=n(27);var v=["/404","/auth"],b=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.config,a=e.channel,i=t.pathname,r=n.find((function(e){return e.path===i}));if(r&&r.redirect)return c.a.createElement(g.a,{to:r.redirect});if(!r||!r.component)return c.a.createElement(g.a,{to:"/404"});var o=r.component;return a||v.includes(i)?c.a.createElement(g.b,{exact:!0,path:i,component:o}):c.a.createElement(g.a,{to:{pathname:"/auth",state:{redirect:i}}})}}]),t}(a.Component),E=Object(p.b)((function(e){return{channel:e.channel}}))(b),y=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"404 File not found")}}]),t}(a.Component),j=function(e){return{type:"SET_CHANNEL",value:e}},O=n(52),w=n.n(O);w.a.interceptors.request.use((function(e){var t=localStorage.getItem("channel");return e.headers.Authorization=t?JSON.parse(t).channel_token:"",e}));var k=function(e,t,n){n=n||"GET";var a=""+e;return new Promise("POST"===n?function(e,n){w.a.post(a,t).then((function(t){e(t.data)})).catch((function(e){n(e)}))}:function(e,n){w.a.get(a,{params:t}).then((function(t){e(t.data)})).catch((function(e){n(e)}))})},S=function(e,t,n,a,c){var i={};i.page=a||1,i.size=c||20,i.category_id=e||0,t&&(i.test_type=t),n&&(i.flag=n);return k("https://api.diggmind.com/api/v2/test/list",i)};var _=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"auth...")}},{key:"componentDidMount",value:function(){this.fetchChannel()}},{key:"fetchChannel",value:function(){var e,t=this;k("https://api.diggmind.com/api/v1/wx/channelData",{channel_id:e||1}).then((function(e){var n=e.data?e.data.channel:null;n.channel_key=e.data.channel_key,n.channel_token=e.data.channel_token,n.channel_token_expire=e.data.channel_token_expire,t.props.setChannel(n);var a=t.props.location.state?t.props.location.state.redirect:"/";t.props.history.push({pathname:a})}))}}]),t}(a.Component),I=Object(p.b)((function(e){return{}}),(function(e){return{setChannel:function(t){return e(j(t))}}}))(_);var x=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("p",null,"\u6211\u662f\u9996\u9875"),c.a.createElement("button",{onClick:function(){e.props.history.push("tests")}},"\u524d\u5f80\u5217\u8868 (",this.props.tests.length,")"))}},{key:"componentDidMount",value:function(){}}]),t}(a.Component),C=Object(p.b)((function(e){return{tests:e.tests}}))(x),D=(n(142),n(102)),N=n.n(D),M=(n(181),n(43)),T=n.n(M),L=(n(190),n(71)),z=n.n(L),R=(n(192),n(193),n(103)),A=n.n(R),B=(n(197),n(104)),H=n.n(B);var P=function(e){return c.a.createElement(A.a,{className:"comp-activity-loading",justify:"center",style:{paddingTop:"20px"}},c.a.createElement(H.a,{text:"Loading..."}))},G=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={testId:0,detail:null},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"fetchDetail",value:function(){var e,t=this;this.state.testId<=0||(e=this.state.testId,k("https://api.diggmind.com/api/v2/test/detail",{test_id:e})).then((function(e){t.setState({detail:e.data})}))}},{key:"componentDidMount",value:function(){var e=window._getQueryBySearch(this.props.location,"id");this.setState({testId:e})}},{key:"componentDidUpdate",value:function(e,t){t.testId!==this.state.testId&&this.fetchDetail(this.state.testId)}},{key:"render",value:function(){var e=this.state.detail;return e?c.a.createElement("div",{className:"page-test-detail"},c.a.createElement(N.a,{size:"lg"},c.a.createElement(z.a,{size:"lg"}),c.a.createElement(T.a,null,c.a.createElement(T.a.Header,{title:e.title,thumb:e.pic,thumbStyle:{width:"25%",maxWidth:"100px",marginRight:"10px"}}),c.a.createElement(T.a.Body,null,c.a.createElement("div",{className:"detail-content",dangerouslySetInnerHTML:{__html:e.content}})),c.a.createElement(T.a.Footer,{content:e.like_num+"\u6536\u85cf",extra:e.tested_num+"\u6d4b\u8fc7"})),c.a.createElement(z.a,{size:"lg"}))):c.a.createElement(P,null)}}]),t}(a.Component),J=(n(199),n(105)),W=n.n(J),q=(n(49),n(40)),F=n.n(q),Q=(n(206),n(72)),$=n.n(Q),U=(n(213),n(214),function(e){var t=e.row,n=e.handleItem;return c.a.createElement("div",{className:"am-list-item am-list-item-top"},c.a.createElement("div",{className:"am-list-thumb"},c.a.createElement("img",{src:t.pic,alt:""})),c.a.createElement("div",{className:"am-list-line am-list-line-multiple",onClick:function(){n(t.id)}},c.a.createElement("div",{className:"am-list-content"},t.title,c.a.createElement("div",{className:"am-list-brief"},t.brief?t.brief:"\u5ba2\u5b98\u8fdb\u6765\u770b\u770b \u5416")),c.a.createElement("div",{className:"am-list-extra"},t.like_num,"\u6536\u85cf")))});var V=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).onEndReached=function(){!n.state.upLoading&&n.state.hasMore&&n.fetchList()},n.fetchList=function(){n.setState({upLoading:!0,page:n.state.page+1});var e=n.state,t=e.categoryId,a=e.testType,c=e.flag,i=e.page,r=e.size;S(t,a,c,i,r).then((function(e){var t=e.data;n.setState({upLoading:!1,list:n.state.list.concat(t),hasMore:t.length>=r})}))},n.handleItem=function(e){n.props.history.push("/details?id=".concat(e))};var a=new $.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,list:[],upLoading:!1,hasMore:!0,categoryId:0,testType:null,flag:null,page:0,size:10},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.list,i=n.dataSource,r=n.hasMore,o=n.size,l=function(){return c.a.createElement("div",{style:{padding:10,textAlign:"center"}},r?c.a.createElement(F.a,{type:"loading"}):"- \u5b8c -")};return 0===a.length&&r?c.a.createElement(P,null):0!==a.length||r?c.a.createElement("div",{className:"page-tests"},c.a.createElement($.a,{dataSource:i.cloneWithRows(a),renderRow:function(e,n,a){return c.a.createElement(U,{row:e,handleItem:t.handleItem})},pageSize:o,renderFooter:function(){return c.a.createElement(l,null)},onEndReached:function(){return t.onEndReached()},onEndReachedThreshold:20,useBodyScroll:!0})):c.a.createElement(W.a,{img:(e="https://gw.alipayobjects.com/zos/rmsportal/GIyMDJnuqmcqPLpHCSkj.svg",c.a.createElement("img",{src:e,style:{width:"60px"},alt:""})),title:"\u6682\u65e0\u6570\u636e",message:"\u5173\u6ce8\u5fae\u4fe1\u516c\u4f17\u53f7\u3010DiggMind\u3011\uff0c\u6316\u6398\u81ea\u6211\uff0c\u8ba4\u77e5\u81ea\u6211"})}}]),t}(a.Component),K=[{path:"/404",component:y},{path:"/auth",component:I},{path:"/",redirect:"/tests"},{path:"/home",component:C,auth:!0},{path:"/tests",component:Object(p.b)((function(e){return{}}),(function(e){return{}}))(V)},{path:"/details",component:G}],X=function(){return c.a.createElement(f.a,null,c.a.createElement(g.d,null,c.a.createElement(E,{config:K})))},Y=n(26),Z=n(107),ee=window.localStorage,te={tests:["\u6d4b\u8bd51","\u6d4b\u8bd52"],channel:ee.getItem("channel")||null},ne=Object(Y.c)({tests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te.tests,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TESTS":var n=new Array(t.value);return e.concat(n);case"TOGGLE_TESTS":return t.value;default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te.channel,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL":return ee.setItem("channel",JSON.stringify(t.value)),t.value;default:return e}}}),ae=Object(Y.e)(ne,Object(Y.d)(Object(Y.a)(Z.a),window.devToolsExtension?window.devToolsExtension():function(e){return e})),ce=(n(215),n(108)),ie=n.n(ce),re=(n(218),n(73)),oe=n.n(re),le=n(110),se=n.n(le);var ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).copyPublicId=function(){if(se()("DiggMind",111)){oe.a.success(c.a.createElement("div",null,c.a.createElement("p",null,"\u5df2\u4e3a\u60a8\u590d\u5236 "),c.a.createElement("p",null,"\u3010DiggMind\u3011\u516c\u4f17\u53f7ID"),c.a.createElement("p",null,"\u8bf7\u524d\u5f80\u5fae\u4fe1\u300c\u7c98\u8d34\u300d\u641c\u7d22")),3)}else{oe.a.offline(c.a.createElement("div",null,c.a.createElement("p",null,"\u8bf7\u524d\u5f80\u5fae\u4fe1 \u641c\u7d22\uff1a"),c.a.createElement("p",null,"\u516c\u4f17\u53f7\uff1aDiggMind")),3)}},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(ie.a,{style:{position:"fixed",top:0,left:0,right:0,zIndex:100},marqueeProps:{loop:!0,style:{padding:"0 15px 0 8px"}},mode:"link",action:c.a.createElement("span",{style:{color:"#108ee9",cursor:"pointer",fontWeight:600},onClick:this.copyPublicId},"\u53bb\u770b\u770b")},"\u8be5\u6d4b\u8bc4\u6765\u6e90\uff1a\u5fae\u4fe1\u516c\u4f17\u53f7 \u3010DiggMind\u3011\uff0c\u5173\u6ce8\u516c\u4f17\u53f7 \u6316\u6398\u81ea\u6211\uff0c\u8ba4\u8bc6\u81ea\u6211\u3002")}}]),t}(a.Component),he=Object(p.b)((function(e){return{}}))(ue),de=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{store:ae},c.a.createElement("div",{className:"app minipage has-notice-bar"},c.a.createElement(he,null),c.a.createElement(X,null)))}}]),t}(a.Component);l.a.attach(document.body),r.a.render(c.a.createElement(de,{glo:"gggg"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.e0713cd5.chunk.js.map